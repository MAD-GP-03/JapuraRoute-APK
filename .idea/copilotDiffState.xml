<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/api/ApiService.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/api/ApiService.kt" />
              <option name="originalContent" value="package com.example.japuraroutef.api&#10;&#10;import android.content.Context&#10;import retrofit2.Retrofit&#10;import retrofit2.converter.gson.GsonConverterFactory&#10;import retrofit2.http.Body&#10;import retrofit2.http.POST&#10;import com.example.japuraroutef.model.RegisterRequest&#10;import com.example.japuraroutef.model.RegisterResponse&#10;import com.example.japuraroutef.model.LoginRequest&#10;import com.example.japuraroutef.model.LoginResponse&#10;import okhttp3.OkHttpClient&#10;import okhttp3.logging.HttpLoggingInterceptor&#10;import com.example.japuraroutef.remote.AuthInterceptor&#10;import com.example.japuraroutef.local.TokenManager&#10;import java.util.concurrent.TimeUnit&#10;&#10;&#10;interface ApiService {&#10;    @POST(&quot;/api/auth/register&quot;)&#10;    suspend fun registerUser(@Body request: RegisterRequest): RegisterResponse&#10;&#10;    @POST(&quot;/api/auth/login&quot;)&#10;    suspend fun loginUser(@Body request: LoginRequest): LoginResponse&#10;&#10;    companion object {&#10;&#10;        private const val BASE_URL = &quot;http://139.59.5.106:8080/&quot;&#10;&#10;        private fun getOkHttpClient(context : Context): OkHttpClient{&#10;&#10;            val loggingInterceptor = HttpLoggingInterceptor().apply{&#10;                level = HttpLoggingInterceptor.Level.BODY&#10;            }&#10;&#10;            return OkHttpClient.Builder()&#10;                .addInterceptor(loggingInterceptor)&#10;                .addInterceptor(AuthInterceptor(TokenManager(context)))&#10;                .connectTimeout(30, TimeUnit.SECONDS)&#10;                .readTimeout(30, TimeUnit.SECONDS)&#10;                .writeTimeout(30, TimeUnit.SECONDS)&#10;                .build()&#10;        }&#10;&#10;        fun create(context: Context): ApiService{&#10;&#10;            return Retrofit.Builder()&#10;                .baseUrl(BASE_URL)&#10;                .client(getOkHttpClient(context))&#10;                .addConverterFactory(GsonConverterFactory.create())&#10;                .build()&#10;                .create(ApiService::class.java)&#10;&#10;        }&#10;&#10;&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.example.japuraroutef.api&#10;&#10;import android.content.Context&#10;import retrofit2.Retrofit&#10;import retrofit2.converter.gson.GsonConverterFactory&#10;import retrofit2.http.Body&#10;import retrofit2.http.POST&#10;import retrofit2.http.GET&#10;import retrofit2.http.Path&#10;import com.example.japuraroutef.model.RegisterRequest&#10;import com.example.japuraroutef.model.RegisterResponse&#10;import com.example.japuraroutef.model.LoginRequest&#10;import com.example.japuraroutef.model.LoginResponse&#10;import okhttp3.OkHttpClient&#10;import okhttp3.logging.HttpLoggingInterceptor&#10;import com.example.japuraroutef.remote.AuthInterceptor&#10;import com.example.japuraroutef.local.TokenManager&#10;import java.util.concurrent.TimeUnit&#10;&#10;&#10;interface ApiService {&#10;    @POST(&quot;/api/auth/register&quot;)&#10;    suspend fun registerUser(@Body request: RegisterRequest): RegisterResponse&#10;&#10;    @POST(&quot;/api/auth/login&quot;)&#10;    suspend fun loginUser(@Body request: LoginRequest): LoginResponse&#10;&#10;    @GET(&quot;/api/timetables/year/{uniYear}&quot;)&#10;    suspend fun getTimetableByYear(@Path(&quot;uniYear&quot;) uniYear: String): TimetableResponse&#10;&#10;    companion object {&#10;&#10;        private const val BASE_URL = &quot;http://139.59.5.106:8080/&quot;&#10;&#10;        private fun getOkHttpClient(context : Context): OkHttpClient{&#10;&#10;            val loggingInterceptor = HttpLoggingInterceptor().apply{&#10;                level = HttpLoggingInterceptor.Level.BODY&#10;            }&#10;&#10;            return OkHttpClient.Builder()&#10;                .addInterceptor(loggingInterceptor)&#10;                .addInterceptor(AuthInterceptor(TokenManager(context)))&#10;                .connectTimeout(30, TimeUnit.SECONDS)&#10;                .readTimeout(30, TimeUnit.SECONDS)&#10;                .writeTimeout(30, TimeUnit.SECONDS)&#10;                .build()&#10;        }&#10;&#10;        fun create(context: Context): ApiService{&#10;&#10;            return Retrofit.Builder()&#10;                .baseUrl(BASE_URL)&#10;                .client(getOkHttpClient(context))&#10;                .addConverterFactory(GsonConverterFactory.create())&#10;                .build()&#10;                .create(ApiService::class.java)&#10;&#10;        }&#10;&#10;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/local/TokenManager.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/local/TokenManager.kt" />
              <option name="originalContent" value="package com.example.japuraroutef.local&#10;&#10;import android.content.Context&#10;import android.content.SharedPreferences&#10;import com.example.japuraroutef.model.User&#10;&#10;class TokenManager(context: Context) {&#10;    private val prefs: SharedPreferences =&#10;        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)&#10;&#10;    companion object {&#10;        private const val PREFS_NAME = &quot;japura_routef_prefs&quot;&#10;        private const val TOKEN_KEY = &quot;auth_token&quot;&#10;        private const val USER_ID_KEY = &quot;user_id&quot;&#10;        private const val USER_EMAIL_KEY = &quot;user_email&quot;&#10;        private const val USER_NAME_KEY = &quot;user_name&quot;&#10;        private const val USER_UNI_YEAR_KEY = &quot;user_uni_key&quot;&#10;        private const val USER_FOCUS_AREA_KEY = &quot;user_focus_area_key&quot;&#10;&#10;        @Volatile&#10;        private var INSTANCE: TokenManager? = null&#10;&#10;        fun getInstance(context: Context): TokenManager {&#10;            return INSTANCE ?: synchronized(this) {&#10;                val instance = TokenManager(context)&#10;                INSTANCE = instance&#10;                instance&#10;            }&#10;        }&#10;    }&#10;&#10;    fun saveToken(token: String) {&#10;        prefs.edit().putString(TOKEN_KEY, token).apply()&#10;    }&#10;&#10;    fun getToken(): String? {&#10;        return prefs.getString(TOKEN_KEY, null)&#10;    }&#10;&#10;    fun clearToken() {&#10;        prefs.edit().remove(TOKEN_KEY).apply()&#10;    }&#10;&#10;    fun saveUser(user: User) {&#10;        prefs.edit()&#10;            .putString(USER_ID_KEY, user.id)&#10;            .putString(USER_EMAIL_KEY, user.email)&#10;            .putString(USER_NAME_KEY, user.name)&#10;            .putString(USER_UNI_YEAR_KEY, user.uniYear)&#10;            .putString(USER_FOCUS_AREA_KEY, user.focusArea)&#10;            .apply()&#10;    }&#10;&#10;    fun getUser(): User? {&#10;        val id = prefs.getString(USER_ID_KEY, null)&#10;        val email = prefs.getString(USER_EMAIL_KEY, null)&#10;        val name = prefs.getString(USER_NAME_KEY, null)&#10;        val uniYear = prefs.getString(USER_UNI_YEAR_KEY, null)&#10;        val focusArea = prefs.getString(USER_FOCUS_AREA_KEY, null)&#10;&#10;&#10;        return if (id != null &amp;&amp; email != null) {&#10;            User(id, email, name, uniYear,focusArea)&#10;        } else {&#10;            null&#10;        }&#10;    }&#10;&#10;    fun clearUser() {&#10;        prefs.edit()&#10;            .remove(USER_ID_KEY)&#10;            .remove(USER_EMAIL_KEY)&#10;            .remove(USER_NAME_KEY)&#10;            .remove(USER_UNI_YEAR_KEY)&#10;            .remove(USER_FOCUS_AREA_KEY)&#10;            .apply()&#10;    }&#10;&#10;    fun clearAuth() {&#10;        clearToken()&#10;        clearUser()&#10;    }&#10;&#10;    fun isLoggedIn(): Boolean {&#10;        return getToken() != null&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.japuraroutef.local&#10;&#10;import android.content.Context&#10;import android.content.SharedPreferences&#10;import com.example.japuraroutef.model.User&#10;&#10;class TokenManager(context: Context) {&#10;    private val prefs: SharedPreferences =&#10;        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)&#10;&#10;    companion object {&#10;        private const val PREFS_NAME = &quot;japura_routef_prefs&quot;&#10;        private const val TOKEN_KEY = &quot;auth_token&quot;&#10;        private const val USER_ID_KEY = &quot;user_id&quot;&#10;        private const val USER_EMAIL_KEY = &quot;user_email&quot;&#10;        private const val USER_NAME_KEY = &quot;user_name&quot;&#10;        private const val USER_UNI_YEAR_KEY = &quot;user_uni_key&quot;&#10;        private const val USER_FOCUS_AREA_KEY = &quot;user_focus_area_key&quot;&#10;&#10;        @Volatile&#10;        private var INSTANCE: TokenManager? = null&#10;&#10;        fun getInstance(context: Context): TokenManager {&#10;            return INSTANCE ?: synchronized(this) {&#10;                val instance = TokenManager(context)&#10;                INSTANCE = instance&#10;                instance&#10;            }&#10;        }&#10;    }&#10;&#10;    fun saveToken(token: String) {&#10;        prefs.edit().putString(TOKEN_KEY, token).apply()&#10;    }&#10;&#10;    fun getToken(): String? {&#10;        return prefs.getString(TOKEN_KEY, null)&#10;    }&#10;&#10;    fun clearToken() {&#10;        prefs.edit().remove(TOKEN_KEY).apply()&#10;    }&#10;&#10;    fun saveUser(user: User) {&#10;        prefs.edit()&#10;            .putString(USER_ID_KEY, user.id)&#10;            .putString(USER_EMAIL_KEY, user.email)&#10;            .putString(USER_NAME_KEY, user.name)&#10;            .putString(USER_UNI_YEAR_KEY, user.uniYear)&#10;            .putString(USER_FOCUS_AREA_KEY, user.focusArea)&#10;            .apply()&#10;    }&#10;&#10;    fun getUser(): User? {&#10;        val id = prefs.getString(USER_ID_KEY, null)&#10;        val email = prefs.getString(USER_EMAIL_KEY, null)&#10;        val name = prefs.getString(USER_NAME_KEY, null)&#10;        val uniYear = prefs.getString(USER_UNI_YEAR_KEY, null)&#10;        val focusArea = prefs.getString(USER_FOCUS_AREA_KEY, null)&#10;&#10;&#10;        return if (id != null &amp;&amp; email != null) {&#10;            User(id, email, name, uniYear,focusArea)&#10;        } else {&#10;            null&#10;        }&#10;    }&#10;&#10;    fun clearUser() {&#10;        prefs.edit()&#10;            .remove(USER_ID_KEY)&#10;            .remove(USER_EMAIL_KEY)&#10;            .remove(USER_NAME_KEY)&#10;            .remove(USER_UNI_YEAR_KEY)&#10;            .remove(USER_FOCUS_AREA_KEY)&#10;            .apply()&#10;    }&#10;&#10;    fun clearAuth() {&#10;        clearToken()&#10;        clearUser()&#10;    }&#10;&#10;    fun isLoggedIn(): Boolean {&#10;        return getToken() != null&#10;    }&#10;&#10;    fun getUserName(): String? {&#10;        return prefs.getString(USER_NAME_KEY, null)&#10;    }&#10;&#10;    fun getUserEmail(): String? {&#10;        return prefs.getString(USER_EMAIL_KEY, null)&#10;    }&#10;&#10;    fun getUserUniYear(): String? {&#10;        return prefs.getString(USER_UNI_YEAR_KEY, null)&#10;    }&#10;&#10;    fun getUserFocusArea(): String? {&#10;        return prefs.getString(USER_FOCUS_AREA_KEY, null)&#10;    }&#10;&#10;    fun getUserId(): String? {&#10;        return prefs.getString(USER_ID_KEY, null)&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/model/Timetable.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/model/Timetable.kt" />
              <option name="updatedContent" value="package com.example.japuraroutef.model&#10;&#10;/**&#10; * Timetable API Response Model&#10; */&#10;data class TimetableResponse(&#10;    val status: Boolean,&#10;    val message: String?,&#10;    val data: TimetableData?&#10;)&#10;&#10;data class TimetableData(&#10;    val id: String,&#10;    val uniYear: String,&#10;    val timetable: TimetableWrapper,&#10;    val createdAt: String,&#10;    val createdBy: String,&#10;    val updatedAt: String,&#10;    val updatedBy: String&#10;)&#10;&#10;data class TimetableWrapper(&#10;    val timetable: List&lt;TimetableEntry&gt;&#10;)&#10;&#10;data class TimetableEntry(&#10;    val day: String,&#10;    val type: String,&#10;    val end_time: String,&#10;    val lecturer: String,&#10;    val location: String,&#10;    val focus_area: List&lt;String&gt;,&#10;    val start_time: String,&#10;    val module_code: String,&#10;    val module_name: String&#10;)&#10;&#10;/**&#10; * Helper function to check if a focus area matches the user's focus area&#10; */&#10;fun TimetableEntry.matchesFocusArea(userFocusArea: FocusArea?): Boolean {&#10;    // COMMON subjects (ITC) are for everyone&#10;    if (focus_area.contains(&quot;ITC&quot;)) {&#10;        return true&#10;    }&#10;    &#10;    // If user has no specific focus area, only show COMMON subjects&#10;    if (userFocusArea == null || userFocusArea == FocusArea.COMMON) {&#10;        return false&#10;    }&#10;    &#10;    // Map user's focus area to timetable focus area code&#10;    val userFocusCode = when (userFocusArea) {&#10;        FocusArea.SOFTWARE -&gt; &quot;ITS&quot;&#10;        FocusArea.NETWORKING -&gt; &quot;ITN&quot;&#10;        FocusArea.MULTIMEDIA -&gt; &quot;ITM&quot;&#10;        FocusArea.COMMON -&gt; &quot;ITC&quot;&#10;    }&#10;    &#10;    return focus_area.contains(userFocusCode)&#10;}&#10;&#10;/**&#10; * Get display text for class type&#10; */&#10;fun TimetableEntry.getTypeDisplay(): String {&#10;    return when (type) {&#10;        &quot;L&quot; -&gt; &quot;Lecture&quot;&#10;        &quot;P&quot; -&gt; &quot;Practical&quot;&#10;        &quot;T&quot; -&gt; &quot;Tutorial&quot;&#10;        &quot;L/T&quot; -&gt; &quot;Lecture/Tutorial&quot;&#10;        &quot;L/P&quot; -&gt; &quot;Lecture/Practical&quot;&#10;        else -&gt; type&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/repository/TimetableRepository.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/repository/TimetableRepository.kt" />
              <option name="updatedContent" value="package com.example.japuraroutef.repository&#10;&#10;import android.content.Context&#10;import android.util.Log&#10;import com.example.japuraroutef.api.ApiService&#10;import com.example.japuraroutef.model.TimetableData&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.withContext&#10;import retrofit2.HttpException&#10;&#10;/**&#10; * Repository for handling timetable-related API calls&#10; */&#10;class TimetableRepository(private val context: Context) {&#10;    &#10;    private val apiService = ApiService.create(context)&#10;    private val TAG = &quot;TimetableRepository&quot;&#10;    &#10;    /**&#10;     * Fetch timetable for a specific university year&#10;     * @param uniYear The university year (e.g., &quot;FIRST_YEAR&quot;, &quot;SECOND_YEAR&quot;, etc.)&#10;     * @return TimetableData if successful, null otherwise&#10;     */&#10;    suspend fun getTimetableByYear(uniYear: String): Result&lt;TimetableData?&gt; {&#10;        return withContext(Dispatchers.IO) {&#10;            try {&#10;                Log.d(TAG, &quot;Fetching timetable for year: $uniYear&quot;)&#10;                val response = apiService.getTimetableByYear(uniYear)&#10;                &#10;                if (response.status &amp;&amp; response.data != null) {&#10;                    Log.d(TAG, &quot;Timetable fetched successfully&quot;)&#10;                    Result.success(response.data)&#10;                } else {&#10;                    Log.e(TAG, &quot;Timetable fetch failed: ${response.message}&quot;)&#10;                    Result.failure(Exception(response.message ?: &quot;Failed to fetch timetable&quot;))&#10;                }&#10;            } catch (e: HttpException) {&#10;                val errorBody = e.response()?.errorBody()?.string()&#10;                Log.e(TAG, &quot;=== HTTP Error Details ===&quot;)&#10;                Log.e(TAG, &quot;Status Code: ${e.code()}&quot;)&#10;                Log.e(TAG, &quot;Error Body: $errorBody&quot;)&#10;                Log.e(TAG, &quot;========================&quot;)&#10;                Result.failure(Exception(&quot;HTTP ${e.code()}: $errorBody&quot;))&#10;            } catch (e: Exception) {&#10;                Log.e(TAG, &quot;Exception fetching timetable&quot;, e)&#10;                Result.failure(e)&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/ui/HomeScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/ui/HomeScreen.kt" />
              <option name="originalContent" value="package com.example.japuraroutef.ui&#10;&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.grid.GridCells&#10;import androidx.compose.foundation.lazy.grid.GridItemSpan&#10;import androidx.compose.foundation.lazy.grid.LazyVerticalGrid&#10;import androidx.compose.foundation.lazy.grid.items&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.EventNote&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.unit.sp&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Brush&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextOverflow&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.foundation.ExperimentalFoundationApi&#10;import androidx.compose.foundation.pager.HorizontalPager&#10;import androidx.compose.foundation.pager.rememberPagerState&#10;import androidx.compose.ui.draw.clip&#10;import com.example.japuraroutef.R&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun HomeScreen(&#10;    modifier: Modifier = Modifier,&#10;    onNavigateToMap: () -&gt; Unit = {},&#10;    onNavigateToGrades: () -&gt; Unit = {},&#10;    onNavigateToSchedule: () -&gt; Unit = {},&#10;    onLogout: () -&gt; Unit = {}&#10;) {&#10;    val colorScheme = MaterialTheme.colorScheme&#10;    val tiles = remember {&#10;        listOf(&#10;            HomeActionTile(&#10;                title = &quot;Class Schedule&quot;,&#10;                icon = Icons.AutoMirrored.Filled.EventNote,&#10;                background = colorScheme.secondaryContainer,&#10;                textColor = colorScheme.onSecondaryContainer,&#10;                iconTint = colorScheme.onSecondaryContainer,&#10;                iconBackground = com.example.japuraroutef.ui.theme.SurfaceContainerHighestDark,&#10;                span = 2,&#10;                onClick = onNavigateToSchedule&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Grades&quot;,&#10;                icon = Icons.Default.Leaderboard,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = com.example.japuraroutef.ui.theme.OnSurfaceVariantDark,&#10;                iconBackground = com.example.japuraroutef.ui.theme.SurfaceContainerHighestDark,&#10;                borderColor = com.example.japuraroutef.ui.theme.OutlineDark,&#10;                onClick = onNavigateToGrades&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Campus Map&quot;,&#10;                icon = Icons.Default.LocationOn,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent,&#10;                onClick = onNavigateToMap&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Events&quot;,&#10;                icon = Icons.Default.Celebration,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Notices&quot;,&#10;                icon = Icons.Default.Notifications,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Booking&quot;,&#10;                icon = Icons.Default.Book,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Transport&quot;,&#10;                icon = Icons.Default.DirectionsBus,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Services&quot;,&#10;                icon = Icons.Default.Build,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent&#10;            )&#10;        )&#10;    }&#10;&#10;    Scaffold(&#10;        modifier = modifier,&#10;        bottomBar = { HomeBottomBar() },&#10;        containerColor = colorScheme.background&#10;    ) { innerPadding -&gt;&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(innerPadding)&#10;        ) {&#10;            HomeTopAppBar(onLogout = onLogout)&#10;&#10;            LazyVerticalGrid(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(horizontal = 16.dp),&#10;                columns = GridCells.Fixed(3),&#10;                horizontalArrangement = Arrangement.spacedBy(16.dp), // gap-4&#10;                verticalArrangement = Arrangement.spacedBy(24.dp), // space-y-6&#10;                contentPadding = PaddingValues(top = 4.dp, bottom = 64.dp) // Space for 3-button navigation bar&#10;            ) {&#10;            item(span = { GridItemSpan(maxLineSpan) }) {&#10;                ImageCarousel()&#10;            }&#10;&#10;            item(span = { GridItemSpan(maxLineSpan) }) {&#10;                HomeGreetingCard()&#10;            }&#10;&#10;            item(span = { GridItemSpan(maxLineSpan) }) {&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.spacedBy(16.dp) // gap-4&#10;                ) {&#10;                    HomeFeatureTile(&#10;                        tile = tiles[0],  // Class Schedule (col-span-3)&#10;                        modifier = Modifier.weight(3f)&#10;                    )&#10;                    HomeFeatureTile(&#10;                        tile = tiles[1],  // Grades (col-span-2)&#10;                        modifier = Modifier.weight(2f)&#10;                    )&#10;                }&#10;            }&#10;&#10;            items(&#10;                items = tiles.drop(2),&#10;                span = { GridItemSpan(it.span) }&#10;            ) { tile -&gt;&#10;                HomeFeatureTile(tile)&#10;            }&#10;        }&#10;        }&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun HomeTopAppBar(onLogout: () -&gt; Unit = {}) {&#10;    val colors = MaterialTheme.colorScheme&#10;    Surface(&#10;        color = Color.Transparent,&#10;        modifier = Modifier.fillMaxWidth()&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .height(72.dp)&#10;                .padding(horizontal = 16.dp, vertical = 8.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            // Logo and Title&#10;            Row(&#10;                verticalAlignment = Alignment.CenterVertically,&#10;                horizontalArrangement = Arrangement.spacedBy(4.dp)&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.ic_fotgo_logo),&#10;                    contentDescription = &quot;FOTGo Logo&quot;,&#10;                    modifier = Modifier.size(48.dp)&#10;                )&#10;                Text(&#10;                    text = &quot;FOTGo&quot;,&#10;                    style = MaterialTheme.typography.titleLarge,&#10;                    color = colors.onSurface,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            }&#10;&#10;            // Actions&#10;            Row(&#10;                horizontalArrangement = Arrangement.spacedBy(8.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Surface(&#10;                    shape = CircleShape,&#10;                    color = colors.surfaceVariant,&#10;                    tonalElevation = 4.dp&#10;                ) {&#10;                    IconButton(onClick = { }) {&#10;                        Icon(Icons.Default.Search, contentDescription = &quot;Search&quot;, tint = colors.onSurface)&#10;                    }&#10;                }&#10;                Surface(&#10;                    shape = CircleShape,&#10;                    color = colors.surfaceVariant,&#10;                    tonalElevation = 4.dp&#10;                ) {&#10;                    IconButton(onClick = onLogout) {&#10;                        Icon(Icons.Default.AccountCircle, contentDescription = &quot;Logout&quot;, tint = colors.onSurface)&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalFoundationApi::class)&#10;@Composable&#10;private fun ImageCarousel() {&#10;    val images = remember {&#10;        listOf(&#10;            R.drawable.gemini_generated_image_hxfk22hxfk22hxfk,&#10;            R.drawable.gemini_generated_image_hxfk22hxfk22hxfk,&#10;            R.drawable.gemini_generated_image_hxfk22hxfk22hxfk&#10;        )&#10;    }&#10;    val pagerState = rememberPagerState(pageCount = { images.size })&#10;&#10;    Column(&#10;        modifier = Modifier.fillMaxWidth()&#10;    ) {&#10;        HorizontalPager(&#10;            state = pagerState,&#10;            modifier = Modifier.fillMaxWidth()&#10;        ) { page -&gt;&#10;            Surface(&#10;                shape = RoundedCornerShape(16.dp),&#10;                color = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(160.dp)&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = images[page]),&#10;                    contentDescription = &quot;Event ${page + 1}&quot;,&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    contentScale = ContentScale.Crop&#10;                )&#10;            }&#10;        }&#10;&#10;        Spacer(Modifier.height(12.dp))&#10;&#10;        // Pager indicator&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(horizontal = 8.dp),&#10;            horizontalArrangement = Arrangement.Center,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            repeat(images.size) { index -&gt;&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(if (pagerState.currentPage == index) 24.dp else 8.dp, 8.dp)&#10;                        .clip(RoundedCornerShape(4.dp))&#10;                        .background(&#10;                            if (pagerState.currentPage == index)&#10;                                com.example.japuraroutef.ui.theme.Primary&#10;                            else&#10;                                com.example.japuraroutef.ui.theme.OutlineDark&#10;                        )&#10;                )&#10;                if (index &lt; images.size - 1) {&#10;                    Spacer(Modifier.width(8.dp))&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun HomeGreetingCard() {&#10;    val gradient = Brush.linearGradient(&#10;        colors = listOf(&#10;            com.example.japuraroutef.ui.theme.DynamicEveningStart,&#10;            com.example.japuraroutef.ui.theme.DynamicEveningEnd&#10;        )&#10;    )&#10;    Surface(&#10;        shape = RoundedCornerShape(28.dp), // extra-large radius&#10;        color = Color.Transparent,&#10;        shadowElevation = 24.dp,&#10;        modifier = Modifier.fillMaxWidth()&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .background(gradient)&#10;                .padding(24.dp) // p-6 = 24px&#10;        ) {&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.spacedBy(16.dp),&#10;                verticalAlignment = Alignment.Top&#10;            ) {&#10;                // Weather/Time Icon&#10;                Icon(&#10;                    imageVector = Icons.Default.NightsStay,&#10;                    contentDescription = &quot;Evening&quot;,&#10;                    tint = com.example.japuraroutef.ui.theme.Primary,&#10;                    modifier = Modifier.size(48.dp)&#10;                )&#10;&#10;                Column {&#10;                    Text(&#10;                        text = &quot;Good Evening!&quot;,&#10;                        color = Color.White, // white for better contrast&#10;                        fontSize = 30.sp, // text-3xl&#10;                        fontWeight = FontWeight.Normal&#10;                    )&#10;                    Spacer(Modifier.height(8.dp)) // mt-2&#10;                    Text(&#10;                        text = &quot;Your next class, Quantum Physics, is in Room 301 at 10:00 AM.&quot;,&#10;                        color = com.example.japuraroutef.ui.theme.OnSurfaceVariantDark,&#10;                        fontSize = 14.sp, // text-sm&#10;                        lineHeight = 22.sp // leading-relaxed&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun HomeFeatureTile(tile: HomeActionTile, modifier: Modifier = Modifier ) {&#10;    Surface(&#10;        shape = RoundedCornerShape(16.dp), // large radius for all tiles&#10;        color = tile.background,&#10;        tonalElevation = 0.dp,&#10;        border = tile.borderColor?.let { BorderStroke(1.dp, it) },&#10;        modifier = modifier&#10;            .then(&#10;                if (tile.span == 2 || tile.iconBackground != Color.Transparent) {&#10;                    Modifier.height(128.dp) // h-32 for first row&#10;                } else {&#10;                    Modifier.aspectRatio(1f) // aspect-square for 3-column tiles&#10;                }&#10;            )&#10;            .fillMaxWidth()&#10;            .clickable(onClick = tile.onClick)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(if (tile.span == 2 || tile.iconBackground != Color.Transparent) 16.dp else 12.dp),&#10;            verticalArrangement = if (tile.iconBackground != Color.Transparent) Arrangement.SpaceBetween else Arrangement.Center,&#10;            horizontalAlignment = if (tile.iconBackground != Color.Transparent) Alignment.Start else Alignment.CenterHorizontally&#10;        ) {&#10;            if (tile.iconBackground != Color.Transparent) {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(48.dp) // w-12 h-12&#10;                        .background(tile.iconBackground, CircleShape),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Icon(&#10;                        imageVector = tile.icon,&#10;                        contentDescription = tile.title,&#10;                        tint = tile.iconTint,&#10;                        modifier = Modifier.size(24.dp)&#10;                    )&#10;                }&#10;            } else {&#10;                Icon(&#10;                    imageVector = tile.icon,&#10;                    contentDescription = tile.title,&#10;                    tint = tile.iconTint,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;                Spacer(Modifier.height(8.dp)) // gap-2&#10;            }&#10;            Text(&#10;                text = tile.title,&#10;                style = if (tile.span == 2 || tile.iconBackground != Color.Transparent) {&#10;                    MaterialTheme.typography.titleMedium.copy(fontSize = 16.sp, fontWeight = FontWeight.Medium)&#10;                } else {&#10;                    MaterialTheme.typography.bodySmall.copy(fontSize = 12.sp, fontWeight = FontWeight.Medium)&#10;                },&#10;                color = tile.textColor,&#10;                maxLines = 2,&#10;                overflow = TextOverflow.Ellipsis,&#10;                textAlign = if (tile.iconBackground != Color.Transparent) androidx.compose.ui.text.style.TextAlign.Start else androidx.compose.ui.text.style.TextAlign.Center&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun HomeBottomBar() {&#10;    NavigationBar {&#10;        NavigationBarItem(selected = true, onClick = { }, icon = { Icon(Icons.Default.Home, null) }, label = { Text(&quot;Home&quot;) })&#10;        NavigationBarItem(selected = false, onClick = { }, icon = { Icon(Icons.Default.Explore, null) }, label = { Text(&quot;Explore&quot;) })&#10;        NavigationBarItem(selected = false, onClick = { }, icon = { Icon(Icons.Default.History, null) }, label = { Text(&quot;History&quot;) })&#10;        NavigationBarItem(selected = false, onClick = { }, icon = { Icon(Icons.Default.Notifications, null) }, label = { Text(&quot;Alerts&quot;) })&#10;    }&#10;}&#10;&#10;private data class HomeActionTile(&#10;    val title: String,&#10;    val icon: ImageVector,&#10;    val background: Color,&#10;    val textColor: Color,&#10;    val iconTint: Color,&#10;    val iconBackground: Color,&#10;    val borderColor: Color? = null,&#10;    val span: Int = 1,&#10;    val onClick: () -&gt; Unit = {}&#10;)&#10;" />
              <option name="updatedContent" value="package com.example.japuraroutef.ui&#10;&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.grid.GridCells&#10;import androidx.compose.foundation.lazy.grid.GridItemSpan&#10;import androidx.compose.foundation.lazy.grid.LazyVerticalGrid&#10;import androidx.compose.foundation.lazy.grid.items&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.EventNote&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.unit.sp&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Brush&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextOverflow&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.foundation.ExperimentalFoundationApi&#10;import androidx.compose.foundation.pager.HorizontalPager&#10;import androidx.compose.foundation.pager.rememberPagerState&#10;import androidx.compose.ui.draw.clip&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import com.example.japuraroutef.R&#10;import com.example.japuraroutef.viewmodel.HomeViewModel&#10;import com.example.japuraroutef.viewmodel.ClassInfo&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun HomeScreen(&#10;    modifier: Modifier = Modifier,&#10;    onNavigateToMap: () -&gt; Unit = {},&#10;    onNavigateToGrades: () -&gt; Unit = {},&#10;    onNavigateToSchedule: () -&gt; Unit = {},&#10;    onLogout: () -&gt; Unit = {},&#10;    viewModel: HomeViewModel = viewModel()&#10;) {&#10;    val colorScheme = MaterialTheme.colorScheme&#10;    val classInfo = viewModel.currentClassInfo.value&#10;    val greeting = viewModel.getGreeting()&#10;    val userName = viewModel.userName.value&#10;    val tiles = remember {&#10;        listOf(&#10;            HomeActionTile(&#10;                title = &quot;Class Schedule&quot;,&#10;                icon = Icons.AutoMirrored.Filled.EventNote,&#10;                background = colorScheme.secondaryContainer,&#10;                textColor = colorScheme.onSecondaryContainer,&#10;                iconTint = colorScheme.onSecondaryContainer,&#10;                iconBackground = com.example.japuraroutef.ui.theme.SurfaceContainerHighestDark,&#10;                span = 2,&#10;                onClick = onNavigateToSchedule&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Grades&quot;,&#10;                icon = Icons.Default.Leaderboard,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = com.example.japuraroutef.ui.theme.OnSurfaceVariantDark,&#10;                iconBackground = com.example.japuraroutef.ui.theme.SurfaceContainerHighestDark,&#10;                borderColor = com.example.japuraroutef.ui.theme.OutlineDark,&#10;                onClick = onNavigateToGrades&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Campus Map&quot;,&#10;                icon = Icons.Default.LocationOn,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent,&#10;                onClick = onNavigateToMap&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Events&quot;,&#10;                icon = Icons.Default.Celebration,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Notices&quot;,&#10;                icon = Icons.Default.Notifications,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Booking&quot;,&#10;                icon = Icons.Default.Book,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Transport&quot;,&#10;                icon = Icons.Default.DirectionsBus,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent&#10;            ),&#10;            HomeActionTile(&#10;                title = &quot;Services&quot;,&#10;                icon = Icons.Default.Build,&#10;                background = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                textColor = com.example.japuraroutef.ui.theme.OnSurfaceDark,&#10;                iconTint = colorScheme.primary,&#10;                iconBackground = Color.Transparent&#10;            )&#10;        )&#10;    }&#10;&#10;    Scaffold(&#10;        modifier = modifier,&#10;        bottomBar = { HomeBottomBar() },&#10;        containerColor = colorScheme.background&#10;    ) { innerPadding -&gt;&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(innerPadding)&#10;        ) {&#10;            HomeTopAppBar(onLogout = onLogout)&#10;&#10;            LazyVerticalGrid(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(horizontal = 16.dp),&#10;                columns = GridCells.Fixed(3),&#10;                horizontalArrangement = Arrangement.spacedBy(16.dp), // gap-4&#10;                verticalArrangement = Arrangement.spacedBy(24.dp), // space-y-6&#10;                contentPadding = PaddingValues(top = 4.dp, bottom = 64.dp) // Space for 3-button navigation bar&#10;            ) {&#10;            item(span = { GridItemSpan(maxLineSpan) }) {&#10;                ImageCarousel()&#10;            }&#10;&#10;            item(span = { GridItemSpan(maxLineSpan) }) {&#10;                HomeGreetingCard(&#10;                    greeting = greeting,&#10;                    userName = userName,&#10;                    classInfo = classInfo&#10;                )&#10;            }&#10;&#10;            item(span = { GridItemSpan(maxLineSpan) }) {&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.spacedBy(16.dp) // gap-4&#10;                ) {&#10;                    HomeFeatureTile(&#10;                        tile = tiles[0],  // Class Schedule (col-span-3)&#10;                        modifier = Modifier.weight(3f)&#10;                    )&#10;                    HomeFeatureTile(&#10;                        tile = tiles[1],  // Grades (col-span-2)&#10;                        modifier = Modifier.weight(2f)&#10;                    )&#10;                }&#10;            }&#10;&#10;            items(&#10;                items = tiles.drop(2),&#10;                span = { GridItemSpan(it.span) }&#10;            ) { tile -&gt;&#10;                HomeFeatureTile(tile)&#10;            }&#10;        }&#10;        }&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun HomeTopAppBar(onLogout: () -&gt; Unit = {}) {&#10;    val colors = MaterialTheme.colorScheme&#10;    Surface(&#10;        color = Color.Transparent,&#10;        modifier = Modifier.fillMaxWidth()&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .height(72.dp)&#10;                .padding(horizontal = 16.dp, vertical = 8.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            // Logo and Title&#10;            Row(&#10;                verticalAlignment = Alignment.CenterVertically,&#10;                horizontalArrangement = Arrangement.spacedBy(4.dp)&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.ic_fotgo_logo),&#10;                    contentDescription = &quot;FOTGo Logo&quot;,&#10;                    modifier = Modifier.size(48.dp)&#10;                )&#10;                Text(&#10;                    text = &quot;FOTGo&quot;,&#10;                    style = MaterialTheme.typography.titleLarge,&#10;                    color = colors.onSurface,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            }&#10;&#10;            // Actions&#10;            Row(&#10;                horizontalArrangement = Arrangement.spacedBy(8.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Surface(&#10;                    shape = CircleShape,&#10;                    color = colors.surfaceVariant,&#10;                    tonalElevation = 4.dp&#10;                ) {&#10;                    IconButton(onClick = { }) {&#10;                        Icon(Icons.Default.Search, contentDescription = &quot;Search&quot;, tint = colors.onSurface)&#10;                    }&#10;                }&#10;                Surface(&#10;                    shape = CircleShape,&#10;                    color = colors.surfaceVariant,&#10;                    tonalElevation = 4.dp&#10;                ) {&#10;                    IconButton(onClick = onLogout) {&#10;                        Icon(Icons.Default.AccountCircle, contentDescription = &quot;Logout&quot;, tint = colors.onSurface)&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalFoundationApi::class)&#10;@Composable&#10;private fun ImageCarousel() {&#10;    val images = remember {&#10;        listOf(&#10;            R.drawable.gemini_generated_image_hxfk22hxfk22hxfk,&#10;            R.drawable.gemini_generated_image_hxfk22hxfk22hxfk,&#10;            R.drawable.gemini_generated_image_hxfk22hxfk22hxfk&#10;        )&#10;    }&#10;    val pagerState = rememberPagerState(pageCount = { images.size })&#10;&#10;    Column(&#10;        modifier = Modifier.fillMaxWidth()&#10;    ) {&#10;        HorizontalPager(&#10;            state = pagerState,&#10;            modifier = Modifier.fillMaxWidth()&#10;        ) { page -&gt;&#10;            Surface(&#10;                shape = RoundedCornerShape(16.dp),&#10;                color = com.example.japuraroutef.ui.theme.SurfaceContainerHighDark,&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(160.dp)&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = images[page]),&#10;                    contentDescription = &quot;Event ${page + 1}&quot;,&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    contentScale = ContentScale.Crop&#10;                )&#10;            }&#10;        }&#10;&#10;        Spacer(Modifier.height(12.dp))&#10;&#10;        // Pager indicator&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(horizontal = 8.dp),&#10;            horizontalArrangement = Arrangement.Center,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            repeat(images.size) { index -&gt;&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(if (pagerState.currentPage == index) 24.dp else 8.dp, 8.dp)&#10;                        .clip(RoundedCornerShape(4.dp))&#10;                        .background(&#10;                            if (pagerState.currentPage == index)&#10;                                com.example.japuraroutef.ui.theme.Primary&#10;                            else&#10;                                com.example.japuraroutef.ui.theme.OutlineDark&#10;                        )&#10;                )&#10;                if (index &lt; images.size - 1) {&#10;                    Spacer(Modifier.width(8.dp))&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun HomeGreetingCard(&#10;    greeting: String,&#10;    userName: String?,&#10;    classInfo: ClassInfo?&#10;) {&#10;    val gradient = Brush.linearGradient(&#10;        colors = listOf(&#10;            com.example.japuraroutef.ui.theme.DynamicEveningStart,&#10;            com.example.japuraroutef.ui.theme.DynamicEveningEnd&#10;        )&#10;    )&#10;    &#10;    // Determine icon based on time of day&#10;    val greetingIcon = when {&#10;        greeting.contains(&quot;Morning&quot;) -&gt; Icons.Default.WbSunny&#10;        greeting.contains(&quot;Afternoon&quot;) -&gt; Icons.Default.WbTwilight&#10;        greeting.contains(&quot;Evening&quot;) -&gt; Icons.Default.NightsStay&#10;        else -&gt; Icons.Default.DarkMode&#10;    }&#10;    &#10;    // Determine class message and icon&#10;    val (classMessage, classIcon) = when (classInfo) {&#10;        is ClassInfo.NextClass -&gt; {&#10;            val message = &quot;Your next class, ${classInfo.moduleName}, is in ${classInfo.location} at ${classInfo.startTime}.&quot;&#10;            Pair(message, Icons.Default.Schedule)&#10;        }&#10;        is ClassInfo.InClass -&gt; {&#10;            val message = &quot;You're currently in ${classInfo.moduleName} at ${classInfo.location}. Class ends at ${classInfo.endTime}.&quot;&#10;            Pair(message, Icons.Default.School)&#10;        }&#10;        is ClassInfo.NoClassToday -&gt; {&#10;            Pair(&quot;No classes scheduled for today. Enjoy your free time!&quot;, Icons.Default.FreeBreakfast)&#10;        }&#10;        is ClassInfo.ClassesFinished -&gt; {&#10;            Pair(&quot;All classes for today are finished. Great work!&quot;, Icons.Default.CheckCircle)&#10;        }&#10;        null -&gt; {&#10;            Pair(&quot;Loading your schedule...&quot;, Icons.Default.HourglassEmpty)&#10;        }&#10;    }&#10;    &#10;    Surface(&#10;        shape = RoundedCornerShape(28.dp), // extra-large radius&#10;        color = Color.Transparent,&#10;        shadowElevation = 24.dp,&#10;        modifier = Modifier.fillMaxWidth()&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .background(gradient)&#10;                .padding(24.dp) // p-6 = 24px&#10;        ) {&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.spacedBy(16.dp),&#10;                verticalAlignment = Alignment.Top&#10;            ) {&#10;                // Time-of-day Icon&#10;                Icon(&#10;                    imageVector = greetingIcon,&#10;                    contentDescription = greeting,&#10;                    tint = com.example.japuraroutef.ui.theme.Primary,&#10;                    modifier = Modifier.size(48.dp)&#10;                )&#10;&#10;                Column {&#10;                    // Greeting with optional user name&#10;                    Text(&#10;                        text = if (userName != null) &quot;$greeting, $userName!&quot; else &quot;$greeting!&quot;,&#10;                        color = Color.White, // white for better contrast&#10;                        fontSize = 30.sp, // text-3xl&#10;                        fontWeight = FontWeight.Normal&#10;                    )&#10;                    &#10;                    Spacer(Modifier.height(12.dp)) // mt-2&#10;                    &#10;                    // Class information with icon&#10;                    Row(&#10;                        horizontalArrangement = Arrangement.spacedBy(8.dp),&#10;                        verticalAlignment = Alignment.CenterVertically&#10;                    ) {&#10;                        Icon(&#10;                            imageVector = classIcon,&#10;                            contentDescription = null,&#10;                            tint = com.example.japuraroutef.ui.theme.Primary,&#10;                            modifier = Modifier.size(20.dp)&#10;                        )&#10;                        &#10;                        Text(&#10;                            text = classMessage,&#10;                            color = com.example.japuraroutef.ui.theme.OnSurfaceVariantDark,&#10;                            fontSize = 14.sp, // text-sm&#10;                            lineHeight = 22.sp // leading-relaxed&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun HomeFeatureTile(tile: HomeActionTile, modifier: Modifier = Modifier ) {&#10;    Surface(&#10;        shape = RoundedCornerShape(16.dp), // large radius for all tiles&#10;        color = tile.background,&#10;        tonalElevation = 0.dp,&#10;        border = tile.borderColor?.let { BorderStroke(1.dp, it) },&#10;        modifier = modifier&#10;            .then(&#10;                if (tile.span == 2 || tile.iconBackground != Color.Transparent) {&#10;                    Modifier.height(128.dp) // h-32 for first row&#10;                } else {&#10;                    Modifier.aspectRatio(1f) // aspect-square for 3-column tiles&#10;                }&#10;            )&#10;            .fillMaxWidth()&#10;            .clickable(onClick = tile.onClick)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(if (tile.span == 2 || tile.iconBackground != Color.Transparent) 16.dp else 12.dp),&#10;            verticalArrangement = if (tile.iconBackground != Color.Transparent) Arrangement.SpaceBetween else Arrangement.Center,&#10;            horizontalAlignment = if (tile.iconBackground != Color.Transparent) Alignment.Start else Alignment.CenterHorizontally&#10;        ) {&#10;            if (tile.iconBackground != Color.Transparent) {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(48.dp) // w-12 h-12&#10;                        .background(tile.iconBackground, CircleShape),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Icon(&#10;                        imageVector = tile.icon,&#10;                        contentDescription = tile.title,&#10;                        tint = tile.iconTint,&#10;                        modifier = Modifier.size(24.dp)&#10;                    )&#10;                }&#10;            } else {&#10;                Icon(&#10;                    imageVector = tile.icon,&#10;                    contentDescription = tile.title,&#10;                    tint = tile.iconTint,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;                Spacer(Modifier.height(8.dp)) // gap-2&#10;            }&#10;            Text(&#10;                text = tile.title,&#10;                style = if (tile.span == 2 || tile.iconBackground != Color.Transparent) {&#10;                    MaterialTheme.typography.titleMedium.copy(fontSize = 16.sp, fontWeight = FontWeight.Medium)&#10;                } else {&#10;                    MaterialTheme.typography.bodySmall.copy(fontSize = 12.sp, fontWeight = FontWeight.Medium)&#10;                },&#10;                color = tile.textColor,&#10;                maxLines = 2,&#10;                overflow = TextOverflow.Ellipsis,&#10;                textAlign = if (tile.iconBackground != Color.Transparent) androidx.compose.ui.text.style.TextAlign.Start else androidx.compose.ui.text.style.TextAlign.Center&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun HomeBottomBar() {&#10;    NavigationBar {&#10;        NavigationBarItem(selected = true, onClick = { }, icon = { Icon(Icons.Default.Home, null) }, label = { Text(&quot;Home&quot;) })&#10;        NavigationBarItem(selected = false, onClick = { }, icon = { Icon(Icons.Default.Explore, null) }, label = { Text(&quot;Explore&quot;) })&#10;        NavigationBarItem(selected = false, onClick = { }, icon = { Icon(Icons.Default.History, null) }, label = { Text(&quot;History&quot;) })&#10;        NavigationBarItem(selected = false, onClick = { }, icon = { Icon(Icons.Default.Notifications, null) }, label = { Text(&quot;Alerts&quot;) })&#10;    }&#10;}&#10;&#10;private data class HomeActionTile(&#10;    val title: String,&#10;    val icon: ImageVector,&#10;    val background: Color,&#10;    val textColor: Color,&#10;    val iconTint: Color,&#10;    val iconBackground: Color,&#10;    val borderColor: Color? = null,&#10;    val span: Int = 1,&#10;    val onClick: () -&gt; Unit = {}&#10;)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/viewmodel/HomeViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/japuraroutef/viewmodel/HomeViewModel.kt" />
              <option name="updatedContent" value="package com.example.japuraroutef.viewmodel&#10;&#10;import android.app.Application&#10;import android.util.Log&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.lifecycle.AndroidViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.japuraroutef.local.TokenManager&#10;import com.example.japuraroutef.model.FocusArea&#10;import com.example.japuraroutef.model.TimetableData&#10;import com.example.japuraroutef.model.TimetableEntry&#10;import com.example.japuraroutef.model.matchesFocusArea&#10;import com.example.japuraroutef.repository.TimetableRepository&#10;import kotlinx.coroutines.launch&#10;import java.time.DayOfWeek&#10;import java.time.LocalDate&#10;import java.time.LocalTime&#10;import java.time.format.TextStyle&#10;import java.util.Locale&#10;&#10;/**&#10; * ViewModel for HomeScreen&#10; * Manages timetable fetching and current class information&#10; */&#10;class HomeViewModel(application: Application) : AndroidViewModel(application) {&#10;    &#10;    private val TAG = &quot;HomeViewModel&quot;&#10;    private val tokenManager = TokenManager(application)&#10;    private val timetableRepository = TimetableRepository(application)&#10;    &#10;    // UI State&#10;    val isLoading = mutableStateOf(false)&#10;    val errorMessage = mutableStateOf&lt;String?&gt;(null)&#10;    val timetableData = mutableStateOf&lt;TimetableData?&gt;(null)&#10;    val currentClassInfo = mutableStateOf&lt;ClassInfo?&gt;(null)&#10;    &#10;    // User info from token storage&#10;    val userName = mutableStateOf&lt;String?&gt;(null)&#10;    val userUniYear = mutableStateOf&lt;String?&gt;(null)&#10;    val userFocusArea = mutableStateOf&lt;FocusArea?&gt;(null)&#10;    &#10;    init {&#10;        loadUserInfo()&#10;    }&#10;    &#10;    /**&#10;     * Load user information from TokenManager&#10;     */&#10;    private fun loadUserInfo() {&#10;        userName.value = tokenManager.getUserName()&#10;        userUniYear.value = tokenManager.getUserUniYear()&#10;        &#10;        // Parse focus area string to enum&#10;        val focusAreaStr = tokenManager.getUserFocusArea()&#10;        userFocusArea.value = focusAreaStr?.let {&#10;            try {&#10;                FocusArea.valueOf(it)&#10;            } catch (e: Exception) {&#10;                Log.e(TAG, &quot;Invalid focus area: $it&quot;, e)&#10;                null&#10;            }&#10;        }&#10;        &#10;        // Fetch timetable if we have university year&#10;        userUniYear.value?.let { year -&gt;&#10;            fetchTimetable(year)&#10;        }&#10;    }&#10;    &#10;    /**&#10;     * Fetch timetable from API&#10;     */&#10;    fun fetchTimetable(uniYear: String) {&#10;        viewModelScope.launch {&#10;            isLoading.value = true&#10;            errorMessage.value = null&#10;            &#10;            val result = timetableRepository.getTimetableByYear(uniYear)&#10;            &#10;            result.onSuccess { data -&gt;&#10;                timetableData.value = data&#10;                updateCurrentClassInfo()&#10;                Log.d(TAG, &quot;Timetable loaded successfully&quot;)&#10;            }&#10;            &#10;            result.onFailure { error -&gt;&#10;                errorMessage.value = error.message&#10;                Log.e(TAG, &quot;Failed to load timetable: ${error.message}&quot;)&#10;            }&#10;            &#10;            isLoading.value = false&#10;        }&#10;    }&#10;    &#10;    /**&#10;     * Update current class information based on current day and time&#10;     */&#10;    private fun updateCurrentClassInfo() {&#10;        val data = timetableData.value ?: return&#10;        val userFocus = userFocusArea.value&#10;        &#10;        // Get current day and time&#10;        val currentDay = LocalDate.now().dayOfWeek.getDisplayName(TextStyle.FULL, Locale.ENGLISH)&#10;        val currentTime = LocalTime.now()&#10;        &#10;        // Filter classes for today that match user's focus area&#10;        val todayClasses = data.timetable.timetable&#10;            .filter { it.day.equals(currentDay, ignoreCase = true) }&#10;            .filter { it.matchesFocusArea(userFocus) }&#10;            .sortedBy { LocalTime.parse(it.start_time) }&#10;        &#10;        if (todayClasses.isEmpty()) {&#10;            currentClassInfo.value = ClassInfo.NoClassToday&#10;            return&#10;        }&#10;        &#10;        // Find current or next class&#10;        for (classEntry in todayClasses) {&#10;            val startTime = LocalTime.parse(classEntry.start_time)&#10;            val endTime = LocalTime.parse(classEntry.end_time)&#10;            &#10;            when {&#10;                // Currently in this class&#10;                currentTime.isAfter(startTime) &amp;&amp; currentTime.isBefore(endTime) -&gt; {&#10;                    currentClassInfo.value = ClassInfo.InClass(&#10;                        moduleName = classEntry.module_name,&#10;                        moduleCode = classEntry.module_code,&#10;                        location = classEntry.location,&#10;                        endTime = classEntry.end_time,&#10;                        type = classEntry.type,&#10;                        lecturer = classEntry.lecturer&#10;                    )&#10;                    return&#10;                }&#10;                // This class is upcoming&#10;                currentTime.isBefore(startTime) -&gt; {&#10;                    currentClassInfo.value = ClassInfo.NextClass(&#10;                        moduleName = classEntry.module_name,&#10;                        moduleCode = classEntry.module_code,&#10;                        location = classEntry.location,&#10;                        startTime = classEntry.start_time,&#10;                        type = classEntry.type,&#10;                        lecturer = classEntry.lecturer&#10;                    )&#10;                    return&#10;                }&#10;            }&#10;        }&#10;        &#10;        // All classes for today are finished&#10;        currentClassInfo.value = ClassInfo.ClassesFinished&#10;    }&#10;    &#10;    /**&#10;     * Get greeting based on time of day&#10;     */&#10;    fun getGreeting(): String {&#10;        val hour = LocalTime.now().hour&#10;        return when (hour) {&#10;            in 0..11 -&gt; &quot;Good Morning&quot;&#10;            in 12..16 -&gt; &quot;Good Afternoon&quot;&#10;            in 17..20 -&gt; &quot;Good Evening&quot;&#10;            else -&gt; &quot;Good Night&quot;&#10;        }&#10;    }&#10;    &#10;    /**&#10;     * Refresh timetable and class info&#10;     */&#10;    fun refresh() {&#10;        userUniYear.value?.let { year -&gt;&#10;            fetchTimetable(year)&#10;        }&#10;    }&#10;}&#10;&#10;/**&#10; * Sealed class representing different class information states&#10; */&#10;sealed class ClassInfo {&#10;    data class NextClass(&#10;        val moduleName: String,&#10;        val moduleCode: String,&#10;        val location: String,&#10;        val startTime: String,&#10;        val type: String,&#10;        val lecturer: String&#10;    ) : ClassInfo()&#10;    &#10;    data class InClass(&#10;        val moduleName: String,&#10;        val moduleCode: String,&#10;        val location: String,&#10;        val endTime: String,&#10;        val type: String,&#10;        val lecturer: String&#10;    ) : ClassInfo()&#10;    &#10;    object NoClassToday : ClassInfo()&#10;    object ClassesFinished : ClassInfo()&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>